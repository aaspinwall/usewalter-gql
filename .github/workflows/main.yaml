name: Platform select

on:
  push:
    branches:
      - actions

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Manager
        if: "contains(github.event.head_commit.message, 'manager')"
        run: echo 'first step ok manager'
      - name: Web
        if: "contains(github.event.head_commit.message, 'web')"
        run: echo 'first step ok web'

  shared:
    name: Build and test shared
    runs-on: ubuntu-latest
    if: "contains(github.event.head_commit.message, 'shared')"
    steps:
      - run: echo 'you got to shared'

  shared-web:
    name: Build and test shared-web
    runs-on: ubuntu-latest
    if: "contains(github.event.head_commit.message, '-web')"
    steps:
      - run: echo 'you got to shared-web'

  mobile:
    name: Build and test mobile
    runs-on: ubuntu-latest
    if: "contains(github.event.head_commit.message, 'mobile')"
    steps:
      - run: echo 'you got to mobile'

  resident:
    name: Build and test resident
    runs-on: ubuntu-latest
    if: "contains(github.event.head_commit.message, 'resident')"
    steps:
      - run: echo 'you got to resident'

  manager:
    name: Build and test manager
    runs-on: ubuntu-latest
    # if: "contains(github.event.head_commit.message, 'manager')"
    if: "contains(github.event.head_commit.message, 'manager')"
    steps:
      - name: 'manager nested'
        if: "contains(github.event.head_commit.message, 'manager')"
        run: echo 'you got to manager'

  all:
    name: Tests all
    runs-on: ubuntu-latest
    if: |
      contains(github.event.head_commit.message, 'web') ||
      contains(github.event.head_commit.message, 'shared') ||
      contains(github.event.head_commit.message, 'manager')
    steps:
      - run: echo 'you got to manager'
